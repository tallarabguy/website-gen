<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_1114301963e0e08e8c2fa888979e85b3 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
</head>
<body>
    
    
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Reuse Folium's auto-generated map container
        const mapId = Object.keys(window).find(key => key.startsWith("map_")); // Get Folium's map variable
        const map = window[mapId]; // Access Folium's map instance

        if (!map) {
            console.error("Folium map instance not found.");
            return;
        }

        // Add CircleMarkers dynamically using data passed from Python
        const data = [{"Latitude":51.5565306,"Longitude":0.1196779,"Name":"AB PHAB Youth Club"},{"Latitude":51.5353571771,"Longitude":0.0779979025,"Name":"Abbey Leisure Centre"},{"Latitude":51.5614811652,"Longitude":0.06904827,"Name":"Age UK Redbridge, Barking, Havering"},{"Latitude":51.5441868,"Longitude":0.0770748,"Name":"Al Madina Barking Mosque"},{"Latitude":51.5355871,"Longitude":0.0825211,"Name":"All Womens Network"},{"Latitude":51.550935,"Longitude":0.1310506,"Name":"Arc Theatre"},{"Latitude":51.5403942,"Longitude":0.1484509,"Name":"B&D Works Job Shop"},{"Latitude":51.5581948,"Longitude":0.1316075,"Name":"Ballerz"},{"Latitude":51.5604793,"Longitude":0.1749016,"Name":"Barking & Dagenham College"},{"Latitude":51.5440255,"Longitude":0.1456001,"Name":"Barking & Dagenham Progress Project"},{"Latitude":51.5396054,"Longitude":0.0781416,"Name":"Barking and Dagenham Giving"},{"Latitude":51.5362026,"Longitude":0.0795093,"Name":"Barking Churches Unite \/ Pit Stop \/ The Community Food Club"},{"Latitude":51.5396132,"Longitude":0.0781534332,"Name":"Barking Enterprise Centre"},{"Latitude":51.536153,"Longitude":0.0805663,"Name":"Barking Food Bank (Trussell Trust)"},{"Latitude":51.5354838,"Longitude":0.0782328,"Name":"BDYD"},{"Latitude":51.55853885,"Longitude":0.1335916087,"Name":"Becontree Broadcasting Station community radio"},{"Latitude":51.5609465,"Longitude":0.1488995,"Name":"Becontree Heath Leisure Centre"},{"Latitude":51.5408827,"Longitude":0.0798445,"Name":"Bluebird Pictures"},{"Latitude":51.5355871,"Longitude":0.0825211,"Name":"bMoneywize"},{"Latitude":51.5495420549,"Longitude":0.1383055989,"Name":"BooksByMILE"},{"Latitude":51.5648022764,"Longitude":0.147126943,"Name":"Box Up Crime"},{"Latitude":51.5191684,"Longitude":-0.0885530517,"Name":"British Red Cross"},{"Latitude":51.4899096,"Longitude":-0.0979757,"Name":"Cambridge House"},{"Latitude":51.5395911,"Longitude":0.0781584,"Name":"Care City CIC"},{"Latitude":51.5451200962,"Longitude":0.1479457428,"Name":"Carers of Barking & Dagenham"},{"Latitude":51.5551724,"Longitude":0.1275882,"Name":"Castle Point Hub"},{"Latitude":51.5519774,"Longitude":0.1647554,"Name":"CGL (drug\/alcohol)"},{"Latitude":51.5362026,"Longitude":0.0795093,"Name":"Citizens Advice Barking & Dagenham"},{"Latitude":51.50464275,"Longitude":-0.0466281,"Name":"City of Faith"},{"Latitude":51.5376892581,"Longitude":0.1411953259,"Name":"Cocoon \u2013 Early Years CIC"},{"Latitude":51.5451172,"Longitude":0.0866468,"Name":"Company Drinks"},{"Latitude":51.5304864,"Longitude":0.0803433,"Name":"Creative B&D"},{"Latitude":51.5389996,"Longitude":0.08097335,"Name":"Creative Wellness Wonder"},{"Latitude":51.553819165,"Longitude":0.160179801,"Name":"CU London"},{"Latitude":51.5440255,"Longitude":0.1456001,"Name":"DABD"},{"Latitude":51.54754415,"Longitude":0.1598273473,"Name":"Dagenham and Redbridge FC Community Trust"},{"Latitude":51.5400132,"Longitude":0.1538234,"Name":"Dagenham Christians Together \/ Church Elm Hub"},{"Latitude":51.5540451658,"Longitude":0.1600139826,"Name":"Dagenham Farm"},{"Latitude":51.5509303,"Longitude":0.1286768,"Name":"Dagenham Ummah Welfare Trust"},{"Latitude":51.5342629,"Longitude":0.1135006192,"Name":"Darul Ummah Goresbrook Food Bank"},{"Latitude":51.5612431,"Longitude":0.1431181,"Name":"East African Education Foundation"},{"Latitude":51.5340334758,"Longitude":0.0994986615,"Name":"Eastbury Manor House"},{"Latitude":51.5588283,"Longitude":0.1140922,"Name":"Ekota Academy"},{"Latitude":51.5417808,"Longitude":0.1434057,"Name":"Elevate Her UK"},{"Latitude":51.7476326,"Longitude":0.5097485,"Name":"Essex County Football Association"},{"Latitude":51.5304373,"Longitude":0.1331329,"Name":"Excel Womens Centre"},{"Latitude":51.5335041,"Longitude":0.1265312,"Name":"Finesse Sport"},{"Latitude":51.5390514,"Longitude":0.0782198,"Name":"Flourish Family Centre"},{"Latitude":51.5441855,"Longitude":0.077534995,"Name":"FoodCycle"},{"Latitude":51.52133,"Longitude":-0.156883,"Name":"Footy Addicts"},{"Latitude":51.5385813,"Longitude":0.1115839,"Name":"Future M.O.L.D.S Communities"},{"Latitude":51.546656665,"Longitude":0.1250901972,"Name":"Future Youth Zone"},{"Latitude":51.5677358598,"Longitude":0.1014168905,"Name":"Futureents"},{"Latitude":51.5410108,"Longitude":0.1271515,"Name":"GAAP Orphanage Foundation"},{"Latitude":51.5725301,"Longitude":0.1431623,"Name":"Green Shoes Arts"},{"Latitude":51.5649982,"Longitude":0.1987391,"Name":"Hamton Environmental Services Ltd \u2013 Total Facilities Management & Commercial Cleaning"},{"Latitude":51.53269985,"Longitude":0.1379858545,"Name":"Harmony House Dagenham CIO"},{"Latitude":51.5581261,"Longitude":0.1288602,"Name":"Healthwatch B&D"},{"Latitude":51.5532641387,"Longitude":0.1552028838,"Name":"Heath Community Hub (previously William Bellamy)"},{"Latitude":51.5420547887,"Longitude":0.0777012523,"Name":"Hilltop Aid"},{"Latitude":51.5355871,"Longitude":0.0825211,"Name":"Humdum UK"},{"Latitude":51.52790915,"Longitude":0.1044220032,"Name":"Humourisk CIC"},{"Latitude":51.5464273,"Longitude":0.1695508,"Name":"J-GO media\/training"},{"Latitude":51.5355871,"Longitude":0.0825211,"Name":"JDS Striving For Excellence CIC"},{"Latitude":51.550935,"Longitude":0.1310506,"Name":"Kingsley Hall Church and Community Centre"},{"Latitude":51.5525245808,"Longitude":0.1408883133,"Name":"Kiwanis Young Professionals United Kingdom"},{"Latitude":51.5399354,"Longitude":0.0035654472,"Name":"L&Q Group"},{"Latitude":51.5319454,"Longitude":0.0763062,"Name":"Laura I. Art Gallery CIC"},{"Latitude":51.5420547887,"Longitude":0.0777012523,"Name":"Life Brooks International"},{"Latitude":51.5576732203,"Longitude":0.1290466314,"Name":"Lifeline Projects"},{"Latitude":51.5454923178,"Longitude":0.1409261887,"Name":"London Riverside Church"},{"Latitude":51.5847541,"Longitude":0.1354167,"Name":"Marks Gate Community Hub"},{"Latitude":51.5847432,"Longitude":0.1372871,"Name":"Marks Gate Nursery & Pre School"},{"Latitude":51.5636665,"Longitude":0.2075517,"Name":"MIND Barking & Dagenham"},{"Latitude":51.5385813,"Longitude":0.1115839,"Name":"Mums on a mission"},{"Latitude":51.5312441,"Longitude":-0.1177579,"Name":"New Europeans UK"},{"Latitude":51.5849255,"Longitude":0.1355262,"Name":"North Meets South"},{"Latitude":51.573059,"Longitude":0.1469905,"Name":"PAT Project"},{"Latitude":51.5403942,"Longitude":0.1484509,"Name":"Pen To Print"},{"Latitude":51.5180198816,"Longitude":0.0371656057,"Name":"PINKYTIPS"},{"Latitude":51.5564695161,"Longitude":0.1078500493,"Name":"Positive Change"},{"Latitude":51.5508583,"Longitude":0.1575644,"Name":"Power House Community Network"},{"Latitude":51.5355693,"Longitude":0.0826865,"Name":"Radiant Ambitions CIC"},{"Latitude":51.5106776,"Longitude":0.0435106,"Name":"Richards House Childrens Hospice"},{"Latitude":51.6749262,"Longitude":0.2149906,"Name":"River Roding Trust"},{"Latitude":51.5247171,"Longitude":0.1062148,"Name":"Rwandese Abagimigambi (RWAAB)"},{"Latitude":51.53151105,"Longitude":0.0759939057,"Name":"Sew London Project"},{"Latitude":51.5208727,"Longitude":0.0209520217,"Name":"Shpresa Programme"},{"Latitude":51.5356079,"Longitude":0.0828688,"Name":"SO HE CARES EDUCATIONAL AND CHILD CARE CIC"},{"Latitude":51.5797871,"Longitude":-0.0346942,"Name":"Spark2Life"},{"Latitude":51.5711814,"Longitude":0.1362369,"Name":"Sparkles baby and parent group"},{"Latitude":51.5706959,"Longitude":0.1352407,"Name":"St Chad\u2019s Church"},{"Latitude":51.5590416,"Longitude":0.1223229,"Name":"St Thomas\u2019s Church"},{"Latitude":51.5321055,"Longitude":0.076246,"Name":"StreetSpace"},{"Latitude":51.5385627,"Longitude":0.1254287,"Name":"Sycamore Trust UK"},{"Latitude":51.5456785889,"Longitude":0.0730359253,"Name":"TCL Reuse Centre"},{"Latitude":51.5281708387,"Longitude":0.104352032,"Name":"Thames Community Hub (previously Sue Bramley)"},{"Latitude":51.5217571,"Longitude":0.1179494,"Name":"THAMES LIFE (FORMERLY THAMES WARD COMMUNITY PROJECT)"},{"Latitude":51.532442,"Longitude":-0.122204,"Name":"The Ben Kinsella Trust"},{"Latitude":51.5318262,"Longitude":0.0756931,"Name":"The Boathouse Studios"},{"Latitude":51.5441855,"Longitude":0.077534995,"Name":"The Hive Womens centre"},{"Latitude":51.5497096,"Longitude":0.144421,"Name":"The Osborne Partnership"},{"Latitude":51.5395911,"Longitude":0.0781584,"Name":"The Pennu Charity"},{"Latitude":51.53430455,"Longitude":0.0872536006,"Name":"The Salvation Army"},{"Latitude":51.5613687,"Longitude":0.1327969749,"Name":"The White House"},{"Latitude":51.5345361,"Longitude":0.1190775,"Name":"theSHED at St John\u2019s House"},{"Latitude":51.5454452,"Longitude":0.1132776,"Name":"TKO Boxing Gym"},{"Latitude":51.5306669,"Longitude":0.0735728,"Name":"TrailNet"},{"Latitude":51.5205431,"Longitude":0.108806093,"Name":"Triangoals"},{"Latitude":51.565898,"Longitude":0.110255,"Name":"Turn Up Broadcasting"},{"Latitude":51.4976435,"Longitude":-0.1476315,"Name":"UK Youth"},{"Latitude":51.5420547887,"Longitude":0.0777012523,"Name":"Ukon Careers"},{"Latitude":51.5403942,"Longitude":0.1484509,"Name":"Ultimate Counselling"},{"Latitude":51.5581766,"Longitude":0.1303005,"Name":"Valence House Museum"},{"Latitude":51.5565255,"Longitude":0.1197617509,"Name":"Via \u2013 Subwize"},{"Latitude":51.596202,"Longitude":0.1478092,"Name":"Wellgate Farm"},{"Latitude":51.5384366,"Longitude":0.1526773,"Name":"William Ford C of E Junior School"},{"Latitude":51.5072178,"Longitude":-0.1275862,"Name":"Womens Trust"},{"Latitude":51.505947,"Longitude":0.0156917,"Name":"You Press"},{"Latitude":51.5296972,"Longitude":-0.0977626,"Name":"Young Elite Management"},{"Latitude":51.5768733,"Longitude":0.1417523,"Name":"Young Stars Football"},{"Latitude":51.54074395,"Longitude":0.1488416,"Name":"Youth League"},{"Latitude":51.5290730746,"Longitude":-0.0949374363,"Name":"Youth Unity CIC"}]; // Data passed as JSON

        data.forEach(point => {
            if (point.Latitude && point.Longitude) {
                L.circleMarker([point.Latitude, point.Longitude], {
                    radius: 5,
                    color: "blue",
                    fillColor: "blue",
                    fillOpacity: 0.8
                }).addTo(map).bindPopup(point.Name);
            }
        });

        // Map state tracking
        let mapState = {
            center: map.getCenter(),
            zoom: map.getZoom()
        };

        function updateMapState() {
            mapState.center = map.getCenter();
            mapState.zoom = map.getZoom();
            console.log("Updated map state:", mapState);
        }

        map.on("moveend", updateMapState);
        map.on("zoomend", updateMapState);

        // Expose map state globally
        window.getMapState = function () {
            console.log("Returning map state:", mapState);
            return mapState;
        };

        // Log initial map state
        updateMapState();
    });
</script>
    
            <div class="folium-map" id="map_1114301963e0e08e8c2fa888979e85b3" ></div>
        
</body>
<script>
    
    
            var map_1114301963e0e08e8c2fa888979e85b3 = L.map(
                "map_1114301963e0e08e8c2fa888979e85b3",
                {
                    center: [51.54647221693442, 0.09818596515910524],
                    crs: L.CRS.EPSG3857,
                    zoom: 12,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_bf155b26b439b268ca5e35867377bf16 = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {"attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors", "detectRetina": false, "maxNativeZoom": 19, "maxZoom": 19, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            );
        
    
            tile_layer_bf155b26b439b268ca5e35867377bf16.addTo(map_1114301963e0e08e8c2fa888979e85b3);
        
</script>
</html>